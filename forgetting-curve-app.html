<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure AI-900 å­¦ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        .tab {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: white;
            color: #0078d4;
        }

        .tab:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .tab.active:hover {
            background: white;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .quiz-content {
            max-width: 800px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            animation: slideUp 0.6s ease-out;
        }

        .input-section h2, .quiz-section h2 {
            color: #0078d4;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #0078d4;
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 120, 212, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #40e0d0 0%, #20b2aa 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }

        .memory-level {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .level-display {
            font-size: 4em;
            font-weight: bold;
            color: #0078d4;
            margin: 20px 0;
            animation: pulse 2s infinite;
        }

        .level-label {
            font-size: 1.2em;
            color: #666;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }

        .study-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .study-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            max-height: 500px;
            overflow-y: auto;
        }

        .study-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .study-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .study-item-title {
            font-weight: 600;
            color: #333;
        }

        .study-item-date {
            font-size: 0.9em;
            color: #666;
        }

        .study-item-retention {
            font-size: 0.9em;
            color: #0078d4;
            margin-top: 5px;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: #c82333;
        }

        .quiz-question {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .quiz-question h3 {
            color: #0078d4;
            margin-bottom: 20px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #0078d4;
            background: #f0f8ff;
        }

        .quiz-option.selected {
            border-color: #0078d4;
            background: #e6f3ff;
        }

        .quiz-option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .quiz-option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .quiz-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-card h4 {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #0078d4;
        }

        .category-tag {
            display: inline-block;
            padding: 4px 12px;
            background: #e6f3ff;
            color: #0078d4;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  Azure AI-900 å­¦ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒª</h1>
            <p>Microsoft Azure AI Fundamentals è©¦é¨“å¯¾ç­– - ã‚¨ãƒ“ãƒ³ã‚°ãƒã‚¦ã‚¹ã®å¿˜å´æ›²ç·šã§åŠ¹ç‡çš„ã«å­¦ç¿’</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('study')">å­¦ç¿’è¨˜éŒ²</button>
            <button class="tab" onclick="switchTab('quiz')">å•é¡Œæ¼”ç¿’</button>
        </div>

        <div id="studySection" class="study-section">
            <div class="main-content">
                <div class="panel">
                    <div class="input-section">
                        <h2>AI-900 å­¦ç¿’å†…å®¹ã‚’è¨˜éŒ²</h2>
                        <form id="studyForm">
                            <div class="form-group">
                                <label for="category">ã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
                                <select id="category" required>
                                    <option value="">ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="AIæ¦‚è¦">AIã®æ¦‚è¦</option>
                                    <option value="æ©Ÿæ¢°å­¦ç¿’">æ©Ÿæ¢°å­¦ç¿’ã®åŸºç¤</option>
                                    <option value="Computer Vision">Computer Vision</option>
                                    <option value="NLP">è‡ªç„¶è¨€èªå‡¦ç† (NLP)</option>
                                    <option value="ä¼šè©±å‹AI">ä¼šè©±å‹AI</option>
                                    <option value="è²¬ä»»ã‚ã‚‹AI">è²¬ä»»ã‚ã‚‹AI</option>
                                    <option value="Azure AI Services">Azure AI Services</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="topic">å­¦ç¿’ãƒˆãƒ”ãƒƒã‚¯</label>
                                <input type="text" id="topic" placeholder="ä¾‹: Azure Computer Vision ã®ç”»åƒåˆ†ææ©Ÿèƒ½" required>
                            </div>
                            <div class="form-group">
                                <label for="details">å­¦ç¿’å†…å®¹ã®è©³ç´°</label>
                                <textarea id="details" placeholder="å­¦ç¿’ã—ãŸå†…å®¹ã‚’è©³ã—ãè¨˜å…¥ã—ã¦ãã ã•ã„ã€‚&#10;ä¾‹: Computer Visionã¯ç”»åƒã‹ã‚‰ç‰©ä½“ã€äººç‰©ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œå‡ºã€‚OCRæ©Ÿèƒ½ã§ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºãŒå¯èƒ½ã€‚" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="question">å•é¡Œ</label>
                                <textarea id="question" placeholder="è©¦é¨“å•é¡Œã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚&#10;ä¾‹: Azure Computer Visionã§å®Ÿè¡Œã§ãã‚‹ã‚¿ã‚¹ã‚¯ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="answer">ç­”ãˆ</label>
                                <textarea id="answer" placeholder="å•é¡Œã®ç­”ãˆã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚&#10;ä¾‹: ç”»åƒåˆ†æã€OCRã€é¡”æ¤œå‡ºã€ç‰©ä½“æ¤œå‡ºãªã©"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="difficulty">ç†è§£åº¦</label>
                                <select id="difficulty">
                                    <option value="1">å®Œç’§ã«ç†è§£ï¼ˆ100%ï¼‰</option>
                                    <option value="0.8">ã»ã¼ç†è§£ï¼ˆ80%ï¼‰</option>
                                    <option value="0.6">ã¾ã‚ã¾ã‚ç†è§£ï¼ˆ60%ï¼‰</option>
                                    <option value="0.4">å°‘ã—ç†è§£ï¼ˆ40%ï¼‰</option>
                                    <option value="0.2">ã»ã¨ã‚“ã©ç†è§£ã§ããšï¼ˆ20%ï¼‰</option>
                                </select>
                            </div>
                            <button type="submit" class="btn">å­¦ç¿’å†…å®¹ã‚’è¨˜éŒ²</button>
                        </form>
                    </div>
                </div>

                <div class="panel">
                    <div class="memory-level">
                        <div class="level-label">AI-900 ç·åˆè¨˜æ†¶ãƒ¬ãƒ™ãƒ«</div>
                        <div class="level-display" id="memoryLevel">0</div>
                        <div class="level-label">/ 100</div>
                    </div>

                    <div class="chart-container">
                        <canvas id="forgettingCurveChart"></canvas>
                    </div>

                    <h2 style="color: #0078d4; margin-bottom: 20px;">å­¦ç¿’å±¥æ­´</h2>
                    <div class="study-list" id="studyList">
                        <div class="empty-state">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 11H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-3"></path>
                                <rect x="8" y="2" width="8" height="11" rx="1"></rect>
                            </svg>
                            <p>ã¾ã å­¦ç¿’è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="quizSection" class="quiz-section hidden">
            <div class="quiz-content">
                <div class="panel">
                    <h2>AI-900 å•é¡Œæ¼”ç¿’</h2>
                    
                    <div class="quiz-stats">
                        <div class="stat-card">
                            <h4>æœ¬æ—¥ã®å•é¡Œæ•°</h4>
                            <div class="value" id="todayQuestions">0</div>
                        </div>
                        <div class="stat-card">
                            <h4>æ­£ç­”ç‡</h4>
                            <div class="value" id="correctRate">0%</div>
                        </div>
                        <div class="stat-card">
                            <h4>é€£ç¶šæ­£è§£æ•°</h4>
                            <div class="value" id="streak">0</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="quizCategory">å‡ºé¡Œã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
                        <select id="quizCategory">
                            <option value="all">ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼</option>
                            <option value="AIæ¦‚è¦">AIã®æ¦‚è¦</option>
                            <option value="æ©Ÿæ¢°å­¦ç¿’">æ©Ÿæ¢°å­¦ç¿’ã®åŸºç¤</option>
                            <option value="Computer Vision">Computer Vision</option>
                            <option value="NLP">è‡ªç„¶è¨€èªå‡¦ç† (NLP)</option>
                            <option value="ä¼šè©±å‹AI">ä¼šè©±å‹AI</option>
                            <option value="è²¬ä»»ã‚ã‚‹AI">è²¬ä»»ã‚ã‚‹AI</option>
                            <option value="Azure AI Services">Azure AI Services</option>
                        </select>
                    </div>

                    <button class="btn btn-secondary" onclick="generateQuiz()">å•é¡Œã‚’ç”Ÿæˆ</button>

                    <div id="quizContent" style="margin-top: 30px;">
                        <!-- å•é¡ŒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // å­¦ç¿’è¨˜éŒ²ã‚’ä¿å­˜ã™ã‚‹é…åˆ—
        let studyRecords = [];
        
        // ã‚¯ã‚¤ã‚ºçµ±è¨ˆ
        let quizStats = {
            today: 0,
            correct: 0,
            total: 0,
            streak: 0
        };

        // Chart.js ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
        let chart = null;

        // ç¾åœ¨ã®ã‚¿ãƒ–
        let currentTab = 'study';

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
        window.addEventListener('DOMContentLoaded', function() {
            // åˆæœŸåŒ–å‡¦ç†
            console.log('ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–ã—ã¦ã„ã¾ã™...');
            updateMemoryLevel();
            updateStudyList();
            drawChart();
        });

        // AI-900 å•é¡Œãƒ—ãƒ¼ãƒ«
        const quizPool = {
            'AIæ¦‚è¦': [
                {
                    question: "äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã®å®šç¾©ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "äººé–“ã®ã‚ˆã†ã«è€ƒãˆã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼",
                        "äººé–“ã®çŸ¥çš„æ´»å‹•ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§å®Ÿç¾ã™ã‚‹æŠ€è¡“",
                        "è‡ªå‹•çš„ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ",
                        "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã®æƒ…å ±ã‚’åé›†ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ "
                    ],
                    correct: 1,
                    explanation: "AIã¯äººé–“ã®çŸ¥çš„æ´»å‹•ï¼ˆå­¦ç¿’ã€æ¨è«–ã€èªè­˜ãªã©ï¼‰ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§å®Ÿç¾ã™ã‚‹æŠ€è¡“ã§ã™ã€‚"
                },
                {
                    question: "æ©Ÿæ¢°å­¦ç¿’ã¨AIã®é–¢ä¿‚ã«ã¤ã„ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "æ©Ÿæ¢°å­¦ç¿’ã¨AIã¯åŒã˜ã‚‚ã®",
                        "æ©Ÿæ¢°å­¦ç¿’ã¯AIã®ä¸€éƒ¨åˆ†",
                        "AIã¯æ©Ÿæ¢°å­¦ç¿’ã®ä¸€éƒ¨åˆ†",
                        "æ©Ÿæ¢°å­¦ç¿’ã¨AIã¯å…¨ãåˆ¥ã®ã‚‚ã®"
                    ],
                    correct: 1,
                    explanation: "æ©Ÿæ¢°å­¦ç¿’ã¯AIã®ä¸€åˆ†é‡ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å­¦ç¿’ã—ã¦äºˆæ¸¬ã‚„åˆ†é¡ã‚’è¡Œã†æŠ€è¡“ã§ã™ã€‚"
                }
            ],
            'æ©Ÿæ¢°å­¦ç¿’': [
                {
                    question: "æ•™å¸«ã‚ã‚Šå­¦ç¿’ã®ä¾‹ã¨ã—ã¦é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "é¡§å®¢ã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‘ã‚‹",
                        "ãƒ¡ãƒ¼ãƒ«ã®ã‚¹ãƒ‘ãƒ åˆ†é¡",
                        "å•†å“ã®æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ",
                        "ç•°å¸¸å€¤ã®æ¤œå‡º"
                    ],
                    correct: 1,
                    explanation: "ã‚¹ãƒ‘ãƒ åˆ†é¡ã¯ã€ãƒ©ãƒ™ãƒ«ä»˜ããƒ‡ãƒ¼ã‚¿ï¼ˆã‚¹ãƒ‘ãƒ /éã‚¹ãƒ‘ãƒ ï¼‰ã‚’ä½¿ã£ã¦å­¦ç¿’ã™ã‚‹æ•™å¸«ã‚ã‚Šå­¦ç¿’ã®å…¸å‹ä¾‹ã§ã™ã€‚"
                },
                {
                    question: "å›å¸°å•é¡Œã®ä¾‹ã¨ã—ã¦é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "ç”»åƒã®çŠ¬çŒ«åˆ†é¡",
                        "ä½å®…ä¾¡æ ¼ã®äºˆæ¸¬",
                        "é¡§å®¢ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°",
                        "ç•°å¸¸å–å¼•ã®æ¤œå‡º"
                    ],
                    correct: 1,
                    explanation: "ä½å®…ä¾¡æ ¼ã®äºˆæ¸¬ã¯é€£ç¶šå€¤ã‚’äºˆæ¸¬ã™ã‚‹å›å¸°å•é¡Œã§ã™ã€‚"
                }
            ],
            'Computer Vision': [
                {
                    question: "Azure Computer Visionã§å®Ÿè¡Œã§ããªã„ã‚¿ã‚¹ã‚¯ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "ç”»åƒå†…ã®ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºï¼ˆOCRï¼‰",
                        "ç‰©ä½“ã®æ¤œå‡ºã¨åˆ†é¡",
                        "éŸ³å£°ã®æ–‡å­—èµ·ã“ã—",
                        "ç”»åƒã®ã‚¿ã‚°ä»˜ã‘"
                    ],
                    correct: 2,
                    explanation: "éŸ³å£°ã®æ–‡å­—èµ·ã“ã—ã¯Computer Visionã§ã¯ãªãã€Speech Servicesã®æ©Ÿèƒ½ã§ã™ã€‚"
                },
                {
                    question: "OCRï¼ˆå…‰å­¦æ–‡å­—èªè­˜ï¼‰ã®ä¸»ãªç”¨é€”ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        "éŸ³å£°ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›",
                        "ç”»åƒã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º",
                        "ãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ã«å¤‰æ›",
                        "ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¿»è¨³"
                    ],
                    correct: 1,
                    explanation: "OCRã¯ç”»åƒã‚„æ–‡æ›¸ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºã™ã‚‹æŠ€è¡“ã§ã™ã€‚"
                }
            ],
            'NLP': [
                {
                    question: "è‡ªç„¶è¨€èªå‡¦ç†ï¼ˆNLPï¼‰ã®ã‚¿ã‚¹ã‚¯ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "æ„Ÿæƒ…åˆ†æ",
                        "ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ã‚ºæŠ½å‡º",
                        "é¡”èªè­˜",
                        "è¨€èªæ¤œå‡º"
                    ],
                    correct: 2,
                    explanation: "é¡”èªè­˜ã¯Computer Visionã®ã‚¿ã‚¹ã‚¯ã§ã‚ã‚Šã€NLPã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"
                },
                {
                    question: "Azure Text Analyticsã§å®Ÿè¡Œã§ãã‚‹ã‚¿ã‚¹ã‚¯ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "ç”»åƒåˆ†æ",
                        "æ„Ÿæƒ…åˆ†æ",
                        "éŸ³å£°èªè­˜",
                        "å‹•ç”»å‡¦ç†"
                    ],
                    correct: 1,
                    explanation: "Text Analyticsã¯æ„Ÿæƒ…åˆ†æã€ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ã‚ºæŠ½å‡ºã€è¨€èªæ¤œå‡ºãªã©ã®ãƒ†ã‚­ã‚¹ãƒˆåˆ†æã‚’è¡Œã„ã¾ã™ã€‚"
                }
            ],
            'ä¼šè©±å‹AI': [
                {
                    question: "Azure Bot Serviceã®ä¸»ãªç”¨é€”ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        "ç”»åƒèªè­˜",
                        "ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã®ä½œæˆ",
                        "ãƒ‡ãƒ¼ã‚¿åˆ†æ",
                        "Webã‚µã‚¤ãƒˆã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°"
                    ],
                    correct: 1,
                    explanation: "Azure Bot Serviceã¯ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚„AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚"
                },
                {
                    question: "QnA Makerã®ä¸»ãªæ©Ÿèƒ½ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        "ç”»åƒã‹ã‚‰ã®è³ªå•å¿œç­”",
                        "FAQãƒ™ãƒ¼ã‚¹ã®è³ªå•å¿œç­”ãƒœãƒƒãƒˆä½œæˆ",
                        "éŸ³å£°èªè­˜",
                        "ç¿»è¨³ã‚µãƒ¼ãƒ“ã‚¹"
                    ],
                    correct: 1,
                    explanation: "QnA Makerã¯FAQã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰è³ªå•å¿œç­”ãƒœãƒƒãƒˆã‚’ç°¡å˜ã«ä½œæˆã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚"
                }
            ],
            'è²¬ä»»ã‚ã‚‹AI': [
                {
                    question: "Microsoftã®è²¬ä»»ã‚ã‚‹AIã®åŸå‰‡ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "å…¬å¹³æ€§",
                        "é€æ˜æ€§",
                        "åˆ©ç›Šæœ€å¤§åŒ–",
                        "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"
                    ],
                    correct: 2,
                    explanation: "Microsoftã®è²¬ä»»ã‚ã‚‹AIã®åŸå‰‡ã¯ã€å…¬å¹³æ€§ã€ä¿¡é ¼æ€§ã¨å®‰å…¨æ€§ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€åŒ…æ‹¬æ€§ã€é€æ˜æ€§ã€èª¬æ˜è²¬ä»»ã§ã™ã€‚"
                },
                {
                    question: "AIã‚·ã‚¹ãƒ†ãƒ ã®ãƒã‚¤ã‚¢ã‚¹ã‚’æ¸›ã‚‰ã™ãŸã‚ã«é‡è¦ãªã“ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        "æœ€æ–°ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã™ã‚‹",
                        "å¤šæ§˜ã§ä»£è¡¨çš„ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹",
                        "å‡¦ç†é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹",
                        "ã‚³ã‚¹ãƒˆã‚’å‰Šæ¸›ã™ã‚‹"
                    ],
                    correct: 1,
                    explanation: "å¤šæ§˜ã§ä»£è¡¨çš„ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€AIã‚·ã‚¹ãƒ†ãƒ ã®ãƒã‚¤ã‚¢ã‚¹ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ã€‚"
                }
            ],
            'Azure AI Services': [
                {
                    question: "Azure Cognitive Servicesã«å«ã¾ã‚Œãªã„ã‚µãƒ¼ãƒ“ã‚¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        "Computer Vision",
                        "Text Analytics",
                        "Azure Storage",
                        "Speech Services"
                    ],
                    correct: 2,
                    explanation: "Azure Storageã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚ŠCognitive Servicesã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚"
                },
                {
                    question: "Azure Machine Learning Studioã®ä¸»ãªç”¨é€”ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        "Webã‚µã‚¤ãƒˆã®ä½œæˆ",
                        "æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤",
                        "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†",
                        "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š"
                    ],
                    correct: 1,
                    explanation: "Azure Machine Learning Studioã¯ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ãŸã‚ã®çµ±åˆé–‹ç™ºç’°å¢ƒã§ã™ã€‚"
                }
            ]
        };

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tab) {
            currentTab = tab;
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(t => t.classList.remove('active'));
            
            if (tab === 'study') {
                document.querySelector('.tab:nth-child(1)').classList.add('active');
                document.getElementById('studySection').classList.remove('hidden');
                document.getElementById('quizSection').classList.add('hidden');
            } else {
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                document.getElementById('studySection').classList.add('hidden');
                document.getElementById('quizSection').classList.remove('hidden');
                updateQuizStats();
            }
        }

        // ã‚¨ãƒ“ãƒ³ã‚°ãƒã‚¦ã‚¹ã®å¿˜å´æ›²ç·šã®è¨ˆç®—
        function calculateRetention(elapsedMinutes, initialUnderstanding) {
            const S = 1440 * initialUnderstanding;
            const retention = Math.exp(-elapsedMinutes / S) * initialUnderstanding * 100;
            return Math.max(0, Math.min(100, retention));
        }

        // ç·åˆè¨˜æ†¶ãƒ¬ãƒ™ãƒ«ã®è¨ˆç®—
        function calculateOverallMemoryLevel() {
            if (studyRecords.length === 0) return 0;

            let totalRetention = 0;
            const now = new Date();

            studyRecords.forEach(record => {
                const elapsedMinutes = (now - new Date(record.date)) / (1000 * 60);
                const retention = calculateRetention(elapsedMinutes, record.difficulty);
                totalRetention += retention;
            });

            return Math.round(totalRetention / studyRecords.length);
        }

        // è¨˜æ†¶ãƒ¬ãƒ™ãƒ«ã®è¡¨ç¤ºã‚’æ›´æ–°
        function updateMemoryLevel() {
            const level = calculateOverallMemoryLevel();
            const levelDisplay = document.getElementById('memoryLevel');
            levelDisplay.textContent = level;
            
            if (level >= 80) {
                levelDisplay.style.color = '#28a745';
            } else if (level >= 60) {
                levelDisplay.style.color = '#0078d4';
            } else if (level >= 40) {
                levelDisplay.style.color = '#ffc107';
            } else {
                levelDisplay.style.color = '#dc3545';
            }
        }

        // ã‚°ãƒ©ãƒ•ã®æç”»
        function drawChart() {
            const ctx = document.getElementById('forgettingCurveChart').getContext('2d');
            
            if (chart) {
                chart.destroy();
            }

            const labels = [];
            const datasets = [];
            const now = new Date();

            for (let i = 0; i <= 168; i += 24) {
                labels.push(`${i / 24}æ—¥å¾Œ`);
            }

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã®è‰²
            const categoryColors = {
                'AIæ¦‚è¦': '#FF6384',
                'æ©Ÿæ¢°å­¦ç¿’': '#36A2EB',
                'Computer Vision': '#FFCE56',
                'NLP': '#4BC0C0',
                'ä¼šè©±å‹AI': '#9966FF',
                'è²¬ä»»ã‚ã‚‹AI': '#FF9F40',
                'Azure AI Services': '#FF6384'
            };

            studyRecords.forEach((record, index) => {
                const data = [];
                const recordDate = new Date(record.date);
                
                for (let i = 0; i <= 168; i += 24) {
                    const futureDate = new Date(now.getTime() + i * 60 * 60 * 1000);
                    const elapsedMinutes = (futureDate - recordDate) / (1000 * 60);
                    const retention = calculateRetention(elapsedMinutes, record.difficulty);
                    data.push(retention);
                }

                datasets.push({
                    label: `${record.category} - ${record.topic}`,
                    data: data,
                    borderColor: categoryColors[record.category] || `hsl(${index * 60}, 70%, 50%)`,
                    backgroundColor: `rgba(0, 120, 212, 0.1)`,
                    tension: 0.4,
                    borderWidth: 2
                });
            });

            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'AI-900 è¨˜æ†¶ä¿æŒç‡ã®æ¨ç§»äºˆæ¸¬',
                            font: {
                                size: 18
                            }
                        },
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            title: {
                                display: true,
                                text: 'è¨˜æ†¶ä¿æŒç‡'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'çµŒéæ™‚é–“'
                            }
                        }
                    }
                }
            });
        }

        // å­¦ç¿’å±¥æ­´ã®è¡¨ç¤ºã‚’æ›´æ–°
        function updateStudyList() {
            const studyList = document.getElementById('studyList');
            
            if (studyRecords.length === 0) {
                studyList.innerHTML = `
                    <div class="empty-state">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 11H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-3"></path>
                            <rect x="8" y="2" width="8" height="11" rx="1"></rect>
                        </svg>
                        <p>ã¾ã å­¦ç¿’è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
                    </div>
                `;
                return;
            }

            studyList.innerHTML = '';
            const now = new Date();

            studyRecords.forEach((record, index) => {
                const elapsedMinutes = (now - new Date(record.date)) / (1000 * 60);
                const retention = calculateRetention(elapsedMinutes, record.difficulty);
                
                const studyItem = document.createElement('div');
                studyItem.className = 'study-item';
                studyItem.innerHTML = `
                    <div class="study-item-header">
                        <div>
                            <span class="category-tag">${record.category}</span>
                            <div class="study-item-title">${record.topic}</div>
                            <div class="study-item-date">${new Date(record.date).toLocaleString('ja-JP')}</div>
                        </div>
                        <button class="delete-btn" onclick="deleteRecord(${index})">å‰Šé™¤</button>
                    </div>
                    <div class="study-item-retention">ç¾åœ¨ã®è¨˜æ†¶ä¿æŒç‡: ${Math.round(retention)}%</div>
                    <div style="font-size: 0.85em; color: #666; margin-top: 10px;">${record.details}</div>
                    ${record.question ? `
                        <div style="margin-top: 15px; padding: 15px; background: #f0f4ff; border-radius: 8px;">
                            <div style="font-weight: 600; color: #0078d4; margin-bottom: 8px;">å•é¡Œ:</div>
                            <div style="color: #555; margin-bottom: 10px;">${record.question}</div>
                            <div style="font-weight: 600; color: #0078d4; margin-bottom: 8px;">ç­”ãˆ:</div>
                            <div style="color: #555;">${record.answer}</div>
                        </div>
                    ` : ''}
                `;
                
                studyList.appendChild(studyItem);
            });
        }

        // è¨˜éŒ²ã®å‰Šé™¤
        function deleteRecord(index) {
            if (confirm('ã“ã®å­¦ç¿’è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                studyRecords.splice(index, 1);
                updateMemoryLevel();
                updateStudyList();
                drawChart();
            }
        }

        // ã‚¯ã‚¤ã‚ºç”Ÿæˆ
        function generateQuiz() {
            const category = document.getElementById('quizCategory').value;
            const quizContent = document.getElementById('quizContent');
            
            let availableQuestions = [];
            
            if (category === 'all') {
                // ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‹ã‚‰å•é¡Œã‚’é›†ã‚ã‚‹
                Object.values(quizPool).forEach(questions => {
                    availableQuestions = availableQuestions.concat(questions);
                });
            } else {
                availableQuestions = quizPool[category] || [];
            }
            
            if (availableQuestions.length === 0) {
                quizContent.innerHTML = '<p>é¸æŠã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }
            
            // ãƒ©ãƒ³ãƒ€ãƒ ã«å•é¡Œã‚’é¸æŠ
            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            const question = availableQuestions[randomIndex];
            
            quizContent.innerHTML = `
                <div class="quiz-question">
                    <h3>å•é¡Œ ${quizStats.today + 1}</h3>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">${question.question}</p>
                    <div class="quiz-options">
                        ${question.options.map((option, index) => `
                            <div class="quiz-option" onclick="selectAnswer(${index}, ${question.correct}, '${question.explanation}')">
                                ${String.fromCharCode(65 + index)}. ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div id="quizFeedback"></div>
                </div>
            `;
            
            // çµ±è¨ˆã‚’æ›´æ–°
            quizStats.today++;
            updateQuizStats();
        }

        // ç­”ãˆã‚’é¸æŠ
        function selectAnswer(selected, correct, explanation) {
            const options = document.querySelectorAll('.quiz-option');
            const feedback = document.getElementById('quizFeedback');
            
            // ã™ã§ã«å›ç­”æ¸ˆã¿ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„
            if (options[0].classList.contains('correct') || options[0].classList.contains('incorrect')) {
                return;
            }
            
            options.forEach((option, index) => {
                option.classList.remove('selected');
                if (index === selected) {
                    option.classList.add('selected');
                }
                if (index === correct) {
                    option.classList.add('correct');
                } else if (index === selected && index !== correct) {
                    option.classList.add('incorrect');
                }
            });
            
            quizStats.total++;
            
            if (selected === correct) {
                quizStats.correct++;
                quizStats.streak++;
                feedback.innerHTML = `
                    <div class="quiz-feedback correct">
                        æ­£è§£ã§ã™ï¼ ${explanation}
                    </div>
                    <button class="btn btn-success" onclick="generateQuiz()" style="margin-top: 20px;">æ¬¡ã®å•é¡Œã¸</button>
                `;
            } else {
                quizStats.streak = 0;
                feedback.innerHTML = `
                    <div class="quiz-feedback incorrect">
                        ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ ${String.fromCharCode(65 + correct)} ã§ã™ã€‚
                        <br><br>${explanation}
                    </div>
                    <button class="btn btn-danger" onclick="generateQuiz()" style="margin-top: 20px;">æ¬¡ã®å•é¡Œã¸</button>
                `;
            }
            
            updateQuizStats();
        }

        // ã‚¯ã‚¤ã‚ºçµ±è¨ˆã‚’æ›´æ–°
        function updateQuizStats() {
            document.getElementById('todayQuestions').textContent = quizStats.today;
            document.getElementById('correctRate').textContent = quizStats.total > 0 
                ? Math.round((quizStats.correct / quizStats.total) * 100) + '%' 
                : '0%';
            document.getElementById('streak').textContent = quizStats.streak;
        }

        // ãƒ•ã‚©ãƒ¼ãƒ ã®å‡¦ç†
        document.getElementById('studyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            console.log('å­¦ç¿’å†…å®¹ã‚’è¨˜éŒ²ä¸­...');
            
            const record = {
                category: document.getElementById('category').value,
                topic: document.getElementById('topic').value,
                details: document.getElementById('details').value,
                question: document.getElementById('question').value,
                answer: document.getElementById('answer').value,
                difficulty: parseFloat(document.getElementById('difficulty').value),
                date: new Date().toISOString()
            };

            console.log('è¨˜éŒ²ãƒ‡ãƒ¼ã‚¿:', record);

            // åŒã˜ãƒˆãƒ”ãƒƒã‚¯ã®æ—¢å­˜è¨˜éŒ²ã‚’æ¢ã™
            const existingIndex = studyRecords.findIndex(r => 
                r.category === record.category && r.topic === record.topic
            );

            if (existingIndex !== -1) {
                // æ—¢å­˜ã®è¨˜éŒ²ã‚’æ›´æ–°ï¼ˆå¾©ç¿’ã¨ã—ã¦æ‰±ã†ï¼‰
                studyRecords[existingIndex] = record;
                console.log('æ—¢å­˜ã®è¨˜éŒ²ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
            } else {
                // æ–°è¦è¨˜éŒ²ã¨ã—ã¦è¿½åŠ 
                studyRecords.push(record);
                console.log('æ–°è¦è¨˜éŒ²ã‚’è¿½åŠ ã—ã¾ã—ãŸ');
            }

            // UIã‚’æ›´æ–°
            updateMemoryLevel();
            updateStudyList();
            drawChart();

            // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
            this.reset();
            
            // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            const btn = this.querySelector('.btn');
            const originalText = btn.textContent;
            btn.textContent = 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸï¼';
            btn.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'linear-gradient(135deg, #0078d4 0%, #005a9e 100%)';
            }, 2000);
        });

        // å®šæœŸçš„ã«è¨˜æ†¶ãƒ¬ãƒ™ãƒ«ã‚’æ›´æ–°ï¼ˆ1åˆ†ã”ã¨ï¼‰
        setInterval(() => {
            if (studyRecords.length > 0) {
                updateMemoryLevel();
                updateStudyList();
            }
        }, 60000);
    </script>
</body>
</html>